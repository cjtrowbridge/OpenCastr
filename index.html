<!DOCTYPE html>
<html lang="en">
<html>
<head>
  <title>OpenCastr</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta name="description" content="A simple and open web based podcast player.">
  <meta name="author" content="CJ Trowbridge">
  <link rel="icon" href="favicon.ico">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous">
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://code.jquery.com/jquery-3.2.1.min.js"></script>
  <meta name="google-signin-client_id" content="1060384476129-3t3np307cij4q8cehm4d4f62v7o7mgvf.apps.googleusercontent.com">
  <script src="https://apis.google.com/js/platform.js" async defer></script>
  
  <style>
    nav{
      background-color: #e3f2fd;
    }
    .g-sign-out{
      display: none;
    }
    .nav-tabs{
     padding-top: 1em; 
    }
    .tab-content{
      border: 1px solid #dee2e6;
      border-top: none;
      padding: 1rem;
    }
    .playlist{
      border: 1px solid #dee2e6;
      padding: 1rem;
      margin-top: 1rem;
    }
  </style>
  
  <script>
    
    var PublicPlaylist = false;
    var UserPlaylist   = false;
    
    $.get( "api/PublicPlaylist.php")
    .done(function( data ) {
      window.PublicPlaylist = data;
      console.log('Public Playlist');
      console.log(data);
    });
    
    function onGoogleSignIn(googleUser){
      // Useful data for your client-side scripts:
      /*
      var profile = googleUser.getBasicProfile();
      console.log("ID: " + profile.getId()); // Don't send this directly to your server!
      console.log('Full Name: ' + profile.getName());
      console.log('Given Name: ' + profile.getGivenName());
      console.log('Family Name: ' + profile.getFamilyName());
      console.log("Image URL: " + profile.getImageUrl());
      console.log("Email: " + profile.getEmail());

      */
       
      $('.g-sign-in').hide();
      $('.g-sign-out').show();
       
      var id_token = googleUser.getAuthResponse().id_token;
      console.log("ID Token: " + id_token);
      
      console.log(googleUser);
       
      $.post( "api/?auth=google", { tokenGoogle: id_token })
      .done(function( data ) {
        alert( "Data Loaded: " + data );
      });
      
    }
    
    function SignOut(){
      $('.g-sign-in').show();
      $('.g-sign-out').hide();
      
      GoogleAuth = gapi.auth2.getAuthInstance();
      GoogleAuth.signOut();
    }
    
  </script>

</head>
<body>

  <div class="container">
    <nav class="navbar navbar-expand-lg navbar-light justify-content-between">
      <a class="navbar-brand" href="https://opencastr.pw">OpenCastr</a>
      <span class="navbar-text">
        <div class="g-sign-in float-right">
          <div class="g-signin2" data-onsuccess="onGoogleSignIn"></div>
        </div>
        <div class="g-sign-out float-right">
          <div class="nav-link" onclick="SignOut();">Sign Out</div>
        </div>
      </span>
    </nav>
    
    <div class="row">
      <div class="col-12 col-md-8">

        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item">
            <a class="nav-link active" href="#news" role="tab" data-toggle="tab">News</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#inspiration" role="tab" data-toggle="tab">Inspiration</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#learning" role="tab" data-toggle="tab">Learning</a>
          </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content">
          <div role="tabpanel" class="tab-pane fade in show active" id="news">
            <div class="playlistContainer">
              <h2>News</h2>
              <p>There will be some podcasts here...</p>
            </div>
          </div>
          <div role="tabpanel" class="tab-pane fade" id="inspiration">
            <div class="playlistContainer">
              <h2>Inspiration</h2>
              <p>There will be some podcasts here...</p>
            </div>
          </div>
          <div role="tabpanel" class="tab-pane fade" id="learning">
            <div class="playlistContainer">
              <h2>Learning</h2>
              <p>There will be some podcasts here...</p>
            </div>
          </div>
        </div>
        
        
      </div>
      <div class="col-12 col-md-4">
        <div class="playlist">
          <h2>Playlist</h2>
        </div>
      </div>
    </div>
    
    <div class="row">
      <div class="col-12">
        <p class="text-muted text-center">A free and <a href="https://github.com/cjtrowbridge/OpenCastr">open source</a> web-based podcast player.</p>
      </div>
    </div>
    
  </div>

  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>
</body>
</html>
